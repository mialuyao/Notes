# 布隆过滤器

- 本质上是一种数据结构，概率型数据结构，是一个bit向量或bit数组

- 特点

  - 高效地插入和查询，得到“某样东西**一定不存在**或者**可能存在**”
  - 相较于传统的list、set、map等数据结构，**更高效**（时间复杂度为$O(K)$）、**占用空间更少**（存储的是二进制数据） ，缺点是其返回的结果是**概率性的**，不是确切的。

- 要映射一个值到布隆过滤器，需要使用**多个不同的哈希函数**生成**多个哈希值**。并对每个生成的哈希值指向的bit位置**令其为1**
  <img src="IMG/bloom filter.png" width="60%"/>
  > 若映射到同一个bin，则会实现覆盖，因此可能存在误判，同时删除困难

- 传统的布隆过滤器**不支持删除**，但是名为**counting bloom filter**的变种可以用来测试元素计数个数是否绝对小于某个阈值，支持元素删除
  - counting bloom filter：将每一位拓展为一个小的计数器，在插入元素时给对应的k（哈希函数个数）个counter的值分别加1，删除元素时给对应的k个counter的值分别减1。

- 支持操作

  - `Create(x)`

    $m$ bit 设置为0，$0 \le j<m$，即$b_j$为bloom filter $b$ 的第$j$个bit，则$\forall j, b_j=0$， $k$个哈希函数$h_i(0 \le i <k)$为$ \forall i, h_i:\{0,1\}^* \mapsto \{0,...,m-1\}$

  - `Add(x)`：增加元素$x$到集合

    所有$k$个哈希函数$h_i$对元素$x$进行映射，将结果索引设置为1，即$\forall,i,g_i=h_i(x) \Rightarrow b_{g_i}=1$

  - `Test(x)`

    如果所有哈希函数返回的索引都是1，那么test函数就返回1（true），即$\bigwedge_{i=0}^{k-1}b_{h_i(x)}$

